[TOC]

- [ç¯å¢ƒæ­å»º](tiyun.cc)
- [åœ¨çº¿è°ƒè¯•](https://dartpad.dartlang.org/)
- [æŸ¥æ‰¾Flutteræ’ä»¶ç½‘ç«™](https://pub.dev/flutter)



#### FlutteråŸºç¡€çŸ¥è¯†

##### DartåŸºç¡€çŸ¥è¯†

###### ç¨‹åºå…¥å£

é¡¶çº§çš„main()å‡½æ•°ä½œä¸ºåº”ç”¨ç¨‹åºçš„å…¥å£ï¼Œå¯ä»¥ä½¿ç”¨[DART](https://dartpad.dartlang.org/)æ¨¡æ‹Ÿçº¿ä¸Šè¿è¡Œç¯å¢ƒæµ‹è¯•ä»£ç 

###### æ§åˆ¶å°è¾“å‡º

print("è¾“å‡ºå†…å®¹")

###### å˜é‡

Dartæ˜¯ç±»å‹å®‰å…¨çš„-å®ƒä½¿ç”¨é™æ€ç±»å‹æ£€æŸ¥å’Œè¿è¡Œæ—¶ç»„åˆ,æ£€æŸ¥ä»¥ç¡®ä¿å˜é‡çš„å€¼å§‹ç»ˆä¸å˜é‡çš„é™æ€å€¼åŒ¹é…,å°½ç®¡ç±»å‹æ˜¯å¿…é¡»çš„,ä½†æŸäº›ç±»å‹æ³¨é‡Šæ˜¯å¯é€‰çš„,å› ä¸ºDartä¼šæ‰§è¡Œç±»å‹æ¨æ–­(å¯ä»¥æŒ‡å®šç±»å‹,ä¹Ÿå¯ä»¥ä¸æŒ‡å®šç±»å‹)

```
void main() {
	int a =123;
  var b = 234;
  print(a);
  print(b);
}
```

è¾“å‡º123,234

###### é»˜è®¤å€¼

ä¸ºåˆå§‹åŒ–çš„å˜é‡åˆå§‹å€¼ä¸ºnull

åœ¨dartä¸­æ•°å­—ä¹Ÿæ˜¯å¯¹è±¡,æ•°å­—åˆå§‹å€¼ä¹Ÿæ˜¯null

###### æ£€æŸ¥nullæˆ–é›¶

```
void main() {
  var myNull = null;
  if (myNull==null){
    print('ä½¿ç”¨nullåˆ¤æ–­null');
  }
  int zero =0;
  if (zero==0){
    print('ä½¿ç”¨0åˆ¤æ–­0');
  }
}
```

###### Dart nullæ£€æŸ¥æœ€ä½³å®è·µ

?.è¿ç®—ç¬¦åœ¨å·¦è¾¹ä¸ºnullçš„æƒ…å†µä¸‹ä¼šé˜»æ–­å³è¾¹çš„è°ƒç”¨,??è¿ç®—ç¬¦ä¸»è¦ä½œç”¨æ˜¯åœ¨å·¦ä¾§è¡¨è¾¾å¼ä¸ºnullæ—¶ä¸ºå…¶è®¾ç½®é»˜è®¤å€¼

`boolean outConn = outgoing[a]?.contains(b)??false`å¦‚æœoutgoingä¸ºnullæˆ–outgoing[a]ä¸ºnullçš„æƒ…å†µä¸‹?.å³ä¾§å°†ä¸ä¼šæ‰ç”¨,å¦‚æœ??å·¦è¾¹ä¸ºnullçš„æƒ…å†µä¸‹ä¼šè®¾ç½®ä¸ºfalse

```
void main() {
	print(null??false);
  print(false??11);
  print(true??false);
}
```

è¾“å‡ºfalse,false,true

###### Functions

```
void main() {
	print(fn());
  print(fn2());
}
fn(){
  return true;
}
bool fn2(){
  return false;
}
```

å¯ä»¥åŠ è¿”å›ç±»å‹,ä¹Ÿå¯ä»¥ä¸åŠ 

###### å¼‚æ­¥ç¼–ç¨‹

Dartæ”¯æŒå•çº¿ç¨‹æ‰§è¡Œ,Dartä½¿ç”¨Futureæ¥è¡¨ç¤ºå¼‚æ­¥æ“ä½œ

```
import 'dart:convert';
import 'dart:html';

void main() {
  getIpAddress(){
    final url = 'https://httpbin.org/ip';
    HttpRequest.request(url).then((value){
      print(json.decode(value.responseText)['origin']);
    }).catchError((error)=>print(error));
	}
	getIpAddress();
}
```

è¿”å›"103.114.160.170, 103.114.160.170"

###### asyncå’Œawait

asyncå‡½æ•°è¿”å›ä¸€ä¸ªFuture,å‡½æ•°çš„ä¸»ä½“æ˜¯ç¨åæ‰§è¡Œ,awaitè¿ç®—ç¬¦æ°¸é›¨ç­‰å¾…Future

```
void main() {
  getIpAddress() async{
    final url = 'https://httpbin.org/ip';
    var request =  await HttpRequest.request(url);
    String ip = json.decode(request.responseText)['origin'];
    print(ip);
	}
	getIpAddress();
}
```

##### å£°æ˜å¼UI

ä¸ºäº†å‡è½»å¼€å‘äººå‘˜åœ¨å„ç§UIçŠ¶æ€ä¹‹é—´è½¬æ¢çš„ç¼–ç¨‹è´Ÿæ‹…,Flutterè®©å¼€å‘äººå‘˜æè¿°å½“å‰çš„UIçŠ¶æ€,å¹¶ä¸”ä¸éœ€è¦å…³ç³»å®ƒæ˜¯å¦‚ä½•è¿‡æ¸¡åˆ°æ¡†æ¶(Android,iOSä½¿ç”¨çš„æ˜¯å‘½ä»¤å¼çš„UIç¼–ç¨‹é£æ ¼)

åœ¨å£°æ˜å¼UIä¸­,è¯•å›¾é…ç½®(ä¾‹å¦‚Flutterçš„widget)æ˜¯ä¸å¯å˜çš„,å¹¶ä¸”åªæ˜¯è½»é‡çº§çš„"è“å›¾".è¦æ›´æ”¹UI,Widgetä¼šåœ¨è‡ªèº«ä¸Šå‡ºå‘é‡å»º,å¹¶æ„é€ ä¸€ä¸ªæ–°çš„Widgetå­æ ‘

##### Flutterå…¥é—¨åŸºç¡€çŸ¥è¯†

###### åˆ›å»ºFlutteré¡¹ç›®

1. ä½¿ç”¨å‘½ä»¤è¡Œ`flutter create å·¥ç¨‹å`,ç¡®ä¿Flutter SDKé…ç½®äº†ç¯å¢ƒå˜é‡
2. ä½¿ç”¨å®‰è£…äº†Flutterå’ŒDartæ’ä»¶çš„IDE(Android Studio , Xcode)

###### è¿è¡ŒFlutteré¡¹ç›®

1. `flutter run -d è®¾å¤‡å`
2. ä½¿ç”¨Ideä¸­çš„run

å¯¼å…¥Widget

è¦ä½¿ç”¨Material Designåº“ä¸­çš„å°éƒ¨ä»¶,éœ€è¦å¯¼å…¥material.dartåŒ…,è¦ä½¿ç”¨iOSæ ·å¼widget,éœ€è¦å¯¼å…¥Cupertinoåº“,è¦ä½¿ç”¨æ›´åŸºæœ¬çš„çª—å£widgeté›†,è¯·å¯¼widgetåº“,ä¹Ÿå¯ä»¥å¯¼å…¥è‡ªå·±ç¼–å†™çš„widget

```
import 'package:flutter/material.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter/my_widgets.dart';
```

ç¼–å†™Hello Word

 åº”ç”¨ç¨‹åºä½¿ç”¨æ ¸å¿ƒçª—å£å°éƒ¨ä»¶åº“ä¸­çš„Centerå’ŒTextçª—å£å°éƒ¨ä»¶,Centerçª—å£å°éƒ¨ä»¶æˆä¸ºçª—å£å°éƒ¨ä»¶æ ‘çš„æ ¹,å¹¶ä¸”æœ‰ä¸€ä¸ªå­çª—å£,å³Textçª—å£å°éƒ¨ä»¶

```
import 'package:flutter/material.dart';

void main() {
  runApp(Center(
    child: Text('Hello Word', textDirection: TextDirection.ltr,),
  ));
}
```

###### å¦‚ä½•ä½¿ç”¨Widgetå¹¶å°†å…¶åµŒå¥—ä»¥å½¢æˆWidgetæ ‘

åœ¨Flutterä¸­,å‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯widget

widgetæ˜¯ç”¨æˆ·ç•Œé¢çš„åŸºæœ¬æ„å»ºå¿«,å°†widgetç»„æˆä¸€ä¸ªå±‚æ¬¡ç»“æ„,æ‰ç”¨widgetæ ‘,æ¯ä¸ªçª—å£widgetéƒ½åµŒå¥—åœ¨çˆ¶çª—å£widgetä¸­,å¹¶ä»å…¶çˆ¶çª—å£å³æˆå±æ€§,è®¾ç½®åº”ç”¨ç¨‹åºå¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶,æ²¡æœ‰å•ç‹¬çš„åº”ç”¨ç¨‹åºå¯¹è±¡,

widgetå¯ä»¥å®šä¹‰

- ç»“æ„å…ƒç´  - å¦‚æŒ‰é’®æˆ–èœå•

- æ–‡ä½“å…ƒç´  - åƒå­—ä½“æˆ–é¢œè‰²ä¸»é¢˜

- ç±»ä¼¼å¸ƒå±€çš„å¡«å……æˆ–å¯¹é½çš„ä¸€ä¸ªæ–¹å‘

  ```
  void main() => runApp(MyApp());
  
  class MyApp extends StatelessWidget {
    // This widget is the root of your application.
    @override
    Widget build(BuildContext context) {
      return MaterialApp(
        title: 'Welcome',
        theme: ThemeData(
          primarySwatch: Colors.blue,
        ),
        home:Scaffold(
          appBar: AppBar(
            title: Text('Welcome to Flutter'),
          ),
          body: Center(child: Text('Flutter Demo Home Page')),
        )
      );
    }
  }
  ```

åˆ›å»ºå¯é‡ç”¨çš„Widget

å®šä¹‰ä¸€ä¸ªç±»æ¥åˆ›å»ºè‡ªå®šä¹‰widget,ç„¶åé‡ç”¨widget,ä¹Ÿå¯ä»¥å®šä¹‰å’Œè°ƒç”¨è¿”å›å¯é‡ç”¨å°éƒ¨ä»¶çš„å‡½æ•°(æ„é€ æ–¹æ³•ä¸­ä½¿ç”¨@requiredè¯´æ˜å‚æ•°æ˜¯å¿…é€‰çš„)

```
class CustomCard extends StatelessWidget {

  final index;
  final Function onPress;

  CustomCard({@required this.index, @required this.onPress});

  @override
  Widget build(BuildContext context) {
    return Card(
      child: Column(
        children: <Widget>[
          Text('Card $index'),
          FlatButton(
            child: const Text('Press'),
            onPressed: this.onPress,
          )
        ],
      ),
    );
  }

}
```

```
CustomCard(index: index, onPress: (){
            print('Card $index');
          })
```

##### Flutteré¡¹ç›®

###### Flutteré¡¹ç›®ç»“æ„

- android â€” Androidå·¥ç¨‹æ–‡ä»¶
- build      â€” é¡¹ç›®çš„æ„å»ºè¾“å‡ºç›®å½•
- ios         â€” iOSå·¥ç¨‹æ–‡ä»¶
- lib          â€” é¡¹ç›®ä¸­çš„Dartæºæ–‡ä»¶
  - src    â€” å…¶å®ƒæºæ–‡ä»¶
  - main.dart  â€” è‡ªåŠ¨ç”Ÿæˆçš„é¡¹ç›®å…¥å£æ–‡ä»¶
- test        â€” æµ‹è¯•ç›¸å…³æ–‡ä»¶
- pubspec.yaml   â€” é¡¹ç›®ä¾èµ–é…ç½®æ–‡ä»¶

###### å½’æ¡£å›¾ç‰‡èµ„æº

- Androidå°†resourceså’ŒassetsåŒºåˆ«å¯¹å¾…,ä½†åœ¨Flutterä¸­å®ƒä»¬éƒ½ä¼šè¢«ä½œä¸ºassetså¤„ç†,æ‰€æœ‰å­˜åœ¨ä¸Androidä¸Šres/drawable-*æ–‡ä»¶å¤¹ä¸­çš„èµ„æºéƒ½æ”¾åœ¨Flutterçš„assetsæ–‡ä»¶å¤¹ä¸­

- ä¸Androidç±»ä¼¼,iOSåŒæ ·å°†imageså’Œassetsä½œä¸ºä½œä¸ºä¸åŒçš„ä¸œè¥¿,è€ŒFlutterä¸­åªæœ‰assets.è¢«æ”¾åˆ°iOSä¸­images.xcassetæ–‡ä»¶å¤¹ä¸‹çš„èµ„æºåœ¨Flutterä¸­è¢«æ”¾åˆ°äº†assetsæ–‡ä»¶å¤¹ä¸­. 

- åœ¨Flutterä¸­assetså¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„æ–‡ä»¶,è€Œä¸ä»…ä»…æ˜¯å›¾ç‰‡,ä¾‹å¦‚å¯ä»¥æŠŠjsonæ–‡ä»¶æ”¾ç½®åˆ°my-assetsæ–‡ä»¶å¤¹ä¸­

  `my-assets/data.json`

- éœ€è¦åœ¨pubspec.yamlæ–‡ä»¶å¤¹ä¸­å£°æ˜assets;

  `assets: - my-assets/data.json`

- åœ¨ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡AssetBundleæ¥è®¿é—®å®ƒ

  ```
  import 'dart:async' show Future;
  import 'package:flutter/services.dart' show rootBundle;
  
  Future<String> loadAsset() async{
  	return await rootBundle.loadString('my-assets/data.json');
  }
  ```

- Flutteréµå¾ªä¸€ä¸ªç®€å•çš„åŸºäºåƒç´ å¯†åº¦çš„æ ¼å¼,image assetså¯èƒ½æ˜¯1.0x 2.0x 3.0xæˆ–è€…å…¶ä»–çš„ä»»ä½•å€æ•°(ç‰©ç†åƒç´ åˆ°å•ä¸ªé€»è¾‘åƒç´ çš„æ¯”ç‡)

- Androidä¸åŒåƒç´ å¯†åº¦çš„å›¾ç‰‡å’ŒFlutterçš„åƒç´ æ¯”ç‡çš„å¯¹åº”å…³ç³»

  ```
  ladpi   0.75x
  mdpi    1.0x
  hdpi.   1.5x
  xhdpi.  2.0x
  xxhdpi.  3.0x
  xxxhdpi.  4.0x
  ```

- Assetså¯ä»¥è¢«æ”¾ç½®åˆ°ä»»ä½•å±æ€§æ–‡ä»¶å¤¹ä¸­â€” Flutterå¹¶æ²¡æœ‰é¢„å…ˆå®šä¹‰çš„æ–‡ä»¶ç»“æ„,æˆ‘ä»¬åœ¨pubspec.yamlæ–‡ä»¶ä¸­å£°æ˜assetsçš„ä½ç½®,ç„¶åFlutterå°±ä¼šæŠŠä»–ä»¬è¯†åˆ«å‡ºæ¥

  æŠŠmy-icon.pngçš„å›¾ç‰‡æ”¾åˆ°Flutterå·¥ç¨‹ä¸­,æŠŠ1.0xå›¾ç‰‡ç›´æ¥æ”¾åˆ°imagesè·Ÿç›®å½•ä¸‹,2.0xå’Œ3.0xåˆ†åˆ«æ”¾åˆ°2.0x,3.0xå­—ç›®å½•ä¸‹,ç„¶ååœ¨pubspec.yamlæ–‡ä»¶ä¸­å£°æ˜å›¾ç‰‡èµ„æº

  å­˜æ”¾

  ```
  images/my_icon.png
  images/2.0x/my_icon.png
  images/3.0x/my_icon.png
  ```

  å£°æ˜

  ```
  assets:
  - images/my_icon.png
  ```

  ä½¿ç”¨

  ```
  return AssetImage("images/my_icon.png");
  ```

  é€šè¿‡Image widgetç›´æ¥ä½¿ç”¨

  ```
  @override
  Widget build(BuildContext context){
  	return Image.asset("images/my_icon.png")
  }
  ```

  ###### å½’æ¡£stringsèµ„æº

  Flutterç›®å‰æ²¡æœ‰ä¸“é—¨çš„å­—ç¬¦ä¸²èµ„æºç³»ç»Ÿ,ç›®å‰,æœ€ä½³åšæ³•æ˜¯å°†stringsèµ„æºä½œä¸ºé™æ€å­—æ®µä¿å­˜åœ¨ç±»ä¸­

  ```
  class Strings{
  	static String welcomeMessage = "Welcome To Flutter"
  }
  ```

  è°ƒç”¨`Text(Strings.welcomeMessage)`

  - é»˜è®¤æƒ…å†µä¸‹,Flutteråªæ”¯æŒç¾å¼è‹±è¯­å­—ç¬¦ä¸²,å¦‚æœè¦æ”¯æŒå…¶å®ƒè¯­è¨€,éœ€è¦å¼•å…¥flutter_localizationsåŒ…,ä¹Ÿè¦å¼•å…¥intlåŒ…æ¥æ”¯æŒå…¶å®ƒçš„i10næœºåˆ¶,ä¾‹å¦‚æ—¥æœŸæ ¼å¼åŒ–

    ```
    dependencies:
       flutter_localizations:
       		sdk:flutter
       intl:"^0.15.6"
    ```

    è¦ä½¿ç”¨flutter_localizationsåŒ…,è¿˜éœ€è¦åœ¨app widgetä¸­æŒ‡å®šlocalizationsDelegateså’ŒsupportedLocales

    ```
    import 'package:flutter_localizations/flutter_localizations.dart';
    
    MaterialApp(
      localizationsDelegates:[
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
      ],
      supportedLocales:[
        const Locale('en','US'),//English
        const Locale('he','IL'),//Hebrew
      ]
    )
    ```

  ###### Flutteré¡¹ç›®æ·»åŠ ä¾èµ–

  Flutterä½¿ç”¨Dartæ„å»ºç³»ç»Ÿå’ŒPubåŒ…ç®¡ç†å™¨æ¥å¤„ç†ä¾èµ–,è¿™äº›å·¥å…·å°†Aandroidå’ŒiOS nativeåŒ…è£…åº”ç”¨ç¨‹åºçš„æ„å»ºå§”æ´¾ç»™ç›¸åº”çš„æ„å»ºç³»ç»Ÿ

  ```
  dependencies:
  	flutter:
  		sdk:flutter
  	google_sign_in:^3.0.3
  ```

  - åœ¨Flutteré¡¹ç›®ä¸­,è™½ç„¶Flutteré¡¹ç›®ä¸­çš„Androidæ–‡ä»¶å¤¹ä¸‹æœ‰Gradleæ–‡ä»¶,ä½†åªæœ‰åœ¨æ·»åŠ å¹³å°ç›¸å…³æ‰€éœ€çš„ä¾èµ–å…³ç³»æ—¶æ‰ä½¿ç”¨è¿™äº›æ–‡ä»¶,å¦åˆ™,åº”è¯¥ä½¿ç”¨pubspec.yamlæ¥å£°æ˜ç”¨äºFLutterçš„å¤–éƒ¨ä¾èµ–é¡¹(iOSåŒç†)

##### Flutterä¸­çš„è§†å›¾Views

##### Flutterä¸­çš„å¸ƒå±€ä¸åˆ—è¡¨

###### LinearLayoutåœ¨Flutterä¸­ç­‰ä»·

		- æ¨ªå‘ç­‰ä»·äºRow
		- çºµå‘ç­‰ä»·äºColumn